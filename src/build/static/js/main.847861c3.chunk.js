(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),u=n(11),r=n.n(u),l=n(12),c=n(2),o=function(e){var t=e.elementName,n=e.setElementName;return a.a.createElement("div",null,"Rajaa henkil\xf6it\xe4: ",a.a.createElement("input",{value:t,onChange:n}))},s=function(e){var t=e.viesti,n=e.type;return null===!t?null:a.a.createElement("div",{className:n},t)},m=function(e){var t=e.henkil\u00f6,n=e.poistaHenkil\u00f6;return a.a.createElement("tr",null,a.a.createElement("td",null,t.nimi),a.a.createElement("td",null,t.numero),a.a.createElement("td",null,a.a.createElement("button",{onClick:n},"Poista")," "))},f=function(e){var t=e.henkil\u00f6t,n=e.poistaHenkil\u00f6;return a.a.createElement("div",null,a.a.createElement("h3",null,"Numerot:"),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Nimi"),a.a.createElement("td",null,"Numero")),t.map(function(e){return a.a.createElement(m,{key:e.id,"henkil\xf6":e,"poistaHenkil\xf6":function(){return n(e.id)}})}))))},p=function(e){var t=e.kysely,n=e.uusiNimi,i=e.asetaUusiNimi,u=e.uusiNumero,r=e.asetaUusiNumero;return a.a.createElement("div",null,a.a.createElement("h3",null,"Lis\xe4\xe4 uusi henkil\xf6:"),a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"Nimi: ",a.a.createElement("input",{value:n,onChange:i})),a.a.createElement("div",null,"Numero: ",a.a.createElement("input",{value:u,onChange:r})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))))},v=n(3),d=n.n(v),E="https://fullstackopen2019.appspot.com/api/persons",h=function(){return d.a.get(E).then(function(e){return e.data})},y=function(e,t){return d.a.post(E,{nimi:e,numero:t}).then(function(e){return e.data})},k=function(e){return d.a.put("".concat(E,"/").concat(e.id),e).then(function(e){return e.data})},b=function(e){return d.a.delete("".concat(E,"/").concat(e))},N=function(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],r=Object(i.useState)(""),m=Object(c.a)(r,2),v=m[0],d=m[1],E=Object(i.useState)(""),N=Object(c.a)(E,2),j=N[0],w=N[1],g=Object(i.useState)({viesti:null,viestiTyyppi:null}),O=Object(c.a)(g,2),T=O[0],C=T.viesti,S=T.viestiTyyppi,H=O[1],L=Object(i.useState)(""),U=Object(c.a)(L,2),J=U[0],P=U[1],x=J.length>0?n.filter(function(e){return e.nimi.toLowerCase.includes(J.toLowerCase())}):n;Object(i.useEffect)(function(){h().then(function(e){return u(e)})},[]);var B=function(){return setTimeout(function(){H({viesti:null,viestiTyyppi:null})},5e3)},D=function(e){var t=Object(l.a)({},e,{numero:j});k(t).then(function(t){u(n.map(function(e){return t.id!==e.id?e:t})),H({viesti:"".concat(e," p\xe4ivitetty, uusi numero on ").concat(t.numero),viestiTyyppi:"success"})}).catch(function(t){u(n.filter(function(t){return t.id!==e})),H({viesti:"".concat(e," oli jo poistettu"),viestiTyyppi:"error"})})},I=function(){y(v,j).then(function(e){u(n.concat(e)),H({viesti:"".concat(v," lis\xe4tty"),viestiTyyppi:"success"})}).catch(function(e){H({viesti:"Virhe",viestiTyyppi:"error"})})};return a.a.createElement("div",null,a.a.createElement("h1",null,"Puhelinluettelo"),a.a.createElement(o,{"uusiEtsitt\xe4v\xe4":J,"asetaEtsitt\xe4v\xe4":function(e){P(e.target.value.toLowerCase)}}),a.a.createElement(p,{kysely:function(e){if(e.preventDefault(),0===j.lenght||j.length>10||0===v.length)alert("T\xe4ytit kent\xe4t virheellisesti");else if(n.find(function(e){return e.numero===j}))alert("$Numero {uusiNumero} on k\xe4yt\xf6ss\xe4");else{var t=n.find(function(e){return e.numero===v});if(t){if(!window.confirm("".concat(t," on jo luettelossa, haluatko vaihtaa numeroa?")))return;D(t)}else I();d(""),w(""),P(""),B()}},uusiNimi:v,asetaUusiNimi:function(e){d(e.target.value)},uusiNumero:j,asetaUusiNumero:function(e){w(e.target.value)}}),a.a.createElement(f,{"henkil\xf6t":x,"poistoHenkil\xf6":function(e){var t=n.find(function(t){return t.id===e});window.confirm("Haluatko poistaa ".concat(t,"?"))&&(b(e).then(function(i){u(n.filter(function(t){return t.id!==e})),H({viesti:"".concat(t.nimi," poistettu."),viestiTyyppi:"success"})}).catch(function(i){u(n.filter(function(t){return t.id!==e})),H({viesti:"".concat(t.nimi," oli jo poistettu"),viestiTyyppi:"error"})}),B())}}),a.a.createElement(s,{viesti:C,viestiTyyppi:S}))};r.a.render(a.a.createElement(N,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.847861c3.chunk.js.map